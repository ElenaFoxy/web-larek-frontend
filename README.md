# Проектная работа "Веб-ларек"

Ссылка на репозиторий
https://github.com/ElenaFoxy/web-larek-frontend.git


Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Данные и типы данных, используемые в приложении

Карточка товара
```
export interface ICard {
	id: string;
        description: string;
	image: string;
	title: string;
	category: string;
	price: number;
}
```

Перечисление способов оплаты
```
enum Payment { online, offline };
```

Перечисление категорий товаров
```
enum Category { softskills, hardskills, plusone, button, other };
```

Информация о заказе
```
export interface IOrder {
        payment: Payment;
	email: string;
	phone: string;
	address: string;
        total: number;
        items: string[];
}
```

Данные товара, используемые на главной странице

```
export type TCardIcon = Pick<ICard, 'title' | 'image' | 'category' | 'price'>;

```

Данные товара, используемые в корзине

```
export type TCardinCart = Pick<ICard, 'title' | 'price'>;

```

Данные о контенте модального окна
```
interface IModalData {
  content: HTMLElement;
}
```

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP: 
- слой представления, отвечает за отображение данных на странице, 
- слой данных, отвечает за хранение и изменение данных,
- презентер, отвечает за связь представления и данных.

### Базовый код

#### Класс Api
Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.
Методы: 
- `get` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер
- `post` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### Класс EventEmitter
Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в презентере для обработки событий и в слоях приложения для генерации событий.  
Основные методы, реализуемые классом описаны интерфейсом `IEvents`:
- `on` - подписка на событие
- `emit` - инициализация события
- `trigger` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие   

### Слой данных

#### Класс CardData, который создаёт карточку товара
В полях класса хранятся следующие данные:
product: TCard - объект карточки товаров
events: IEvents - экземпляр класса `EventEmitter` для инициации событий при добавлении/удалении товара в корзину.

Так же класс предоставляет набор методов для взаимодействия с этими данными.
addinCart(): void - добавляет товар в корзину
deletefromCart(): void - удаляет карточку из корзины
а так-же сеттеры и геттеры для сохранения и получения данных из полей класса

#### Класс OrderData, который создаёт карточку заказа
order: IOrder - объект заказа
events: IEvents - экземпляр класса `EventEmitter` для инициации событий при создании/оформлении заказа
create() - создает заказ
confirm() - подтверждает заказ
а так-же сеттеры и геттеры для сохранения и получения данных из полей класса

#### Класс FormValidator, который настраивает валидацию полей формы


### Слой отображения

#### Класс Mainpage, который отвечает за отображение главной страницы
cards: TCardIcon[] - массив объектов карточек товаров
render() - отвечает за создание и отрисовку карточек товаров на странице.
findCard(productId: string): ICard - возвращает карточку по ее id


#### Класс Popup, который отвечает за открытие и закрытие модального окна
content: IModalData - отвечает за содержимое окна
open() - открывает модальное окно
close() - закрывает модальное окно
render(content) - отрисовка модального окна


#### Класс Cart, который отвечает за отображение корзины
cards: TCardinCart[] - массив объектов товаров в корзине
getTotal() - считает общую стоимость корзины
getCount() - считает количество товаров в корзине
clear() - очищает корзину
delete() - удаляет товар


#### Класс Order, который отвечает за отображение формы заказа
choicePayment() - выбор оплаты
setAddress() - установка адреса доставки
setEmail() - установка email адреса
setPhone() - установка телефона
setTotal() - установка итоговой суммы заказа
activateButton() - установка кнопки в активное состояние (для нажатия и перехода к следующему окну)
deactivateButton() - установка кнопки в неактивное состояние (нельзя нажать, например, при ошибке ввода)
show() - отображение заказа




